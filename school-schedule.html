<!doctype html> 
<head>
	<!-- add jquery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<link rel="stylesheet" type="text/css" href="school-schedule.css">
	<script type="text/javascript" src="./school-schedule.js"></script>
</head>


<body> 
	<h1>School Planner</h1>
	<p> Welcome back, <span id="name"></span></p>

	

	<p>World time is <span id="datetime"></span></p>
	<p> This page has been access <span id="numAccess"></span></p>

	<br><br><br><br>
	<div id="mouseOverMe" style="background-color: yellow;color: black;">
		<p> View important content(hover over me) </p>
	</div>

	<div class="highlighted">
		Enter Your name here <input type="text" id="nameInput" value="your name">
		<button id="enterName">Enter!</button><br>
	</div>

	<div class="highlighted">
		Upload Your file here <input type="file" name="document" id="my_file">
	</div>

	<div class="highlighted">
		Important information
	</div>
	<br><br>

	<div>
		<p>Wait Who are You?</p>
		<p>
			<strong>Register Here!</strong><br>
			Name: <input type="text" name="regisName"> <br>
			User: <input type="text" name="regisUser"> <br>
			Pass: <input type="password" name="regisPass">
			<button id="regisBtn">Register</button>
			<br><span id="errorMessage" class="errorText" hidden>
				Please Fix the following errors:
			</span>
			<ul class="errorText">
				<li id="atLeast10" hidden>The password must be at least 10 characters</li>
				<li id="atLeast1Num" hidden>The password must contain at least 1 number</li>
				<li id="specialChar" hidden>The pass word must cotain at least 1 special character('!,@,#,$,%,^,&,*')</li>
			</ul>
			<br><span id="successMessage" hidden>The password is Okay</span>
			<br><br>
			<strong>Sign Straight in!</strong> <br>
			User: <input type="text" name="signinUser"> <br>
			Pass: <input type="password" name="signinPass">
			<button id="signinBtn">Sign in</button>
		<br><br><br>
		</p>

	</div>
	<p>
		<p style="color=black;background-color: red;">
		Build a TODO list(JQUERY)<br>
		</p>
		Add to List <input type="text" id="item">
		<button id="addToListBtn">add</button>
		<button id="clearToListBtn">Clear</button>
		<!-- Create a unorderlist for the TODO list -->
		<ul style="background-color:rgb(0, 153, 255);padding:20px;width: 50%;">
			<span id="todoList"></span>
			<li> Math(core)</li>
			<li> Physic(core)</li>
			<li> Science(core)</li>
			<li> Computer Science(core)</li>
		</ul>
	</p>

	<div>
		<p><br><br>
		Subprocess Testing</p>
		<button id="spawnBtn">Spawn</button>
		<span id="spawnMessage" hidden></span>
	</div>

	<div>
		<br><br><br><br><br>
		Handle Uploaded file 
		<br>
		<!-- Good and Easy example with input no need form -->
		<!-- https://stackoverflow.com/questions/22087076/how-to-make-a-simple-image-upload-using-javascript-html -->
		<form id="upload-form" class="upload-box" method="post" enctype="multipart/form-data" onsubmit="return validateFormOnSubmit(this);">
			<input type="file" id="file" name="file1" />
			<span id="upload-error" class="error"></span>
			<input type="submit" id="upload-button" value="upload" />
		</form>
	</div>



	<script type="text/javascript">

		var numAccess = 0;
		if(localStorage.numAccess)// if it not exist this return und(false)
			numAccess = parseInt(localStorage.getItem('numAccess'));

		//first, make change to numAccess. second  update numAccess
		//third line, change it on HTML content
		numAccess += 1 
		localStorage.setItem('numAccess',numAccess);
		var numAccessField = document.getElementById('numAccess');
		numAccessField.innerHTML = numAccess; 

		// retrieve and update the date content on HTML
		var dateField = document.getElementById('datetime');
		dateField.innerHTML = new Date();

		/**even handlers**/
		/**
		 *e: event (first argument of an event handler alway)
		 *follow up with argument "highlightedState" boolean tell if 
		 * mouse is hover over or out of the region. 
		 */
		function viewImportant(e, highlightedState){
			var color;
			var fontWeight; 
			// var highlightedState = true;
			if(highlightedState){
				color = "red";
				fontWeight = "bold";
			}else{
				color = "black";
				fontWeight = "normal";
			}
			var divs = document.getElementsByClassName("highlighted");
			for(var i = 0;i<divs.length;i++){
				divs[i].style.color = color;
				divs[i].style.fontWeight = fontWeight; 
			}
		}

		function enterNameHandler(e){
			var name = document.getElementById("name");
			//get the user input
			var nameInput = document.getElementById("nameInput");
			name.innerHTML = nameInput.value;

			//clear value user enterd in the box 
			nameInput.value = "";
		}

		function addToList(e){
			if($("#item").val() != "")// if it not empty then add
				$("#todoList").append("<li>" + $("#item").val() + "</li>");
			// clear the input box 
			$("#item").val("");
			// move cursor back to add item text box 
			$("#item").focus();
		}

		function clearList(e){
			$("#todoList").empty();
		}



		//first line retrieve mouseHover, second, retrieve name Enter button
		var mouseOverMe = document.getElementById("mouseOverMe");
		var nameEnter = document.getElementById("enterName");
		var addToListBtn = document.getElementById("addToListBtn");
		var clearToListBtn = document.getElementById("clearToListBtn");
		var spawnBtn = document.getElementById("spawnBtn");

		// console.log(name);
		// add mosue listener event 
		mouseOverMe.addEventListener("mouseover", (e)=>viewImportant(e,true));
		mouseOverMe.addEventListener("mouseout", (e)=>viewImportant(e,false));
		nameEnter.addEventListener("click", (e)=>enterNameHandler(e));
		addToListBtn.addEventListener("click", (e)=>addToList(e));
		clearToListBtn.addEventListener("click", (e)=>clearList(e));
		spawnBtn.addEventListener("click", (e)=>spawnEvent(e));

		//add effect when hover to element of a TODO list
		//////////////////////////////////////////////////
		// $("li").mouseenter(function(){
		// 	$(this).css({"fontWeight":"bold"})
		// });
		// $("li").mouseleave(function(){
		// 	$(this).css({"fontWeight":"normal"})
		// });
		//////////////////////////////////////////////////
		//////////////equivalent to 2 line above/////////
		///Using Hover() can specifies 2 function(mouse enter)
		/// and mouseleave()
		// $("li").hover(function(){$(this).css({"fontWeight":"bold"})},
		// 			  function(){$(this).css({"fontWeight":"normal"})});
		//////////////////////////////////////////////////
		//////////////////////////////////////////////////
		///Specifies multiple function for 1 element/////
		$("li").on({
			mouseenter: function(){$(this).css({"fontWeight":"bold"})},
			mouseleave: function(){$(this).css({"fontWeight":"normal"})},
			click: function(){$(this).css({"color":"red"})}
		})
		//////////////////////////////////////////////////

		/** Register and signin handling**/ 
		$("#regisBtn").click(function(e){
			var isOkay = true;
			$(".errorText").show();// show it back incase previously hide it
			$("#atLeast1Num").hide();// hide it if show previously
			$("#atLeast10").hide();
			$("#specialChar").hide();


			//check if password len is greater than 10
			if($("input[name='regisPass']").val().length < 10){
				isOkay = false;
				$("#atLeast10").show();
			}

			//check if password contain at least one special char
			if($("input[name='regisPass']").val().search(/(!|@|#|\^|\&|\*)/) < 0){
				isOkay = false;
				$("#specialChar").show();
			}

			//check if password contain at least one digit
			if(!/\d/.test($("input[name='regisPass']").val())){
				isOkay = false;
				$("#atLeast1Num").show();
			}
			if(isOkay){
				$(".errorText").hide();// hide error text if got wrong earlier
				$("#successMessage").show();
				$("input[name='regisPass']").removeClass("errorBox").addClass("validBox");
			}else{

				$("#errorMessage").show();
				// add nice border
				$("input[name='regisPass']").removeClass("validBox").addClass("errorBox");
			}
		});

		/// HANDLE file submite button
		$('#upload-button').on('change',(e)=>fileHandler(e));
	</script>
</body>